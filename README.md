 # IM即时通讯系统
## 基础功能
### 1. 用户登录注册
* 使用jwt中间件
* 密码通过bcrypt加密
### 2. 添加、删除好友
* 添加好友发送好友请求，同意后方可成为好友
### 3. 与好友进行支持文本与图片的即时通讯（WebSocket）
* 文本直接通过升级websocket协议进行传输
* 图片通过先通过http上传，经字节切片后经websocket以binarymessage形式进行传输，图片最终上传至服务器储存于nginx静态目录中，数据库保存url
## 加分项
### 1.支持群聊功能
* 每个人都可以创建群聊和邀请群成员，消息接收和分发通过redis的订阅发布
### 2.将项目部署在服务器上
* 通过docker将项目跑在容器里暴露在ten.ferdinandaedth.top:8088
* 通过运行容器时共享主机与容器目录实现访问静态目录中的图片
### 3.对于高并发的处理
* 使用连接池,针对 mysql和WebSocket 连接的管理，使用连接池来复用连接资源，避免频繁地创建和关闭连接
* 使用通道传递消息，通过使用通道，接收到的消息在主循环中被发送到通道中，并在单独的 goroutine 中进行处理和发送。确保消息按顺序发送，并且不会丢失任何消息
* 协程（goroutine)处理消息发送,在代码中，通过启动一个单独的 goroutine 来处理消息的发送，这使得发送和接收可以并行进行，从而提高了并发性能。这样在接收到消息时，主循环不会被阻塞，直接将消息发送到通道，然后继续处理下一个消息。
* 群发消息中，通过Redis的订阅和发布功能，当有大量的客户端同时连接并发送消息时，通过发布到Redis频道，可以快速将消息广播给所有订阅该频道的客户端，实现高并发下的实时消息传递。
### 4.对于提升项目的可用性
* 使用redis缓存群成员信息，减少数据库负担
